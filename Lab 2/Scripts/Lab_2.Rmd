---
title: "Lab 2 - R Basics, Data Types, Data Manipulation"
date: "`r Sys.Date()`"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
```

## Learning Objectives

After completing this lab, you will be able to:

1.  Write clear, well-commented code
2.  Understand and use variables to store data
3.  Call functions and provide arguments
4.  Work with different data types (numeric, character, logical)
5.  Create and manipulate vectors and data frames
6.  Install and load R packages

## How to Use This Script

1.  Read through the explanatory text
2.  Run each code block one at a time (click the green play button or press Ctrl+Enter / Cmd+Enter)
3.  Observe what happens in the output below each chunk
4.  Complete the exercises marked "EXERCISE"

------------------------------------------------------------------------

# PART 1: Comments - Documenting Your Code

Comments start with the `#` symbol. R ignores everything after `#` on a line.

**Why use comments?**

-   Explain what your code does (for yourself and others)
-   Leave notes for future reference
-   Temporarily disable code without deleting it

```{r}
# Bad comment:
n <- 5  # set n to 5

# Good comment:
n <- 5  # set sample size 
```

------------------------------------------------------------------------

# PART 2: Variables - Storing Information

A **variable** is a labeled container that holds a value. Use `<-` (assignment arrow) to store a value in a variable. Keyboard shortcut: Alt and - (Windows) or Option and - (Mac).

```{r}
sample_size <- 30
temperature_celsius <- 22.5
species_name <- "Carcharhinus melanopterus"
```

To see what's stored in a variable, just type its name:

```{r}
sample_size
temperature_celsius
species_name
```

You can use variables in calculations and store the output in a new variable name:

```{r}
temperature_fahrenheit <- (temperature_celsius * 9/5) + 32
temperature_fahrenheit
```

Variables can be updated - this is a common source of error so keep good track:

```{r}
sample_size <- 50
sample_size
```

Finally, take a look at your Environment pane to the right to see what variables you have defined.

### Naming Rules for Variables

1.  Can contain letters, numbers, underscores (`_`), and periods (`.`)
2.  Must START with a letter (or a period)
3.  Case-sensitive: "Species" and "species" are different!
4.  Cannot use reserved words (like: if, else, for, TRUE, FALSE)

```{r}
# Good variable names:
body_mass_kg <- 1.2
num_observations <- 100
is_endangered <- TRUE

# Avoid these:
# x <- 5           # Not descriptive
# 2nd_sample <- 10 # Can't start with a number
# my-data <- 5     # Hyphens not allowed (use underscores)
```

### EXERCISE

Create a variable called `bird_wingspan_cm` and assign it a value of 105. Then calculate the wingspan in meters and store it in `bird_wingspan_m`.

```{r}
# Your code here:


```

------------------------------------------------------------------------

# PART 3: Data Types

R works with several fundamental data types. When you store data in a variable, R recognizes it as one of several types.

## 1. NUMERIC - Numbers (integers and decimals)

```{r}

population_size <- 1500      # integer
average_weight <- 2.45       # decimal (called "double")
temperature <- -5.2          # negative numbers work too
scientific <- 6.022e23       # scientific notation 

# Check the type with the class function:
class(population_size)  # "numeric"
```

## OPERATIONS WITH NUMERIC DATA TYPES

```{r}

2 + 1   # Addition
2 - 1   # Subtraction 
2 * 1   # Multiplication
2 / 1   # Division
2 ^ 2   # Exponentiation
7 %% 2  # Modulo - remainder after division
7 %/% 2 # Integer division

```

## 2. CHARACTER - Text (also called "strings")

Always use quotes (single or double).

```{r}
genus <- "Carcharhinus"
species <- 'melanopterus'
full_name <- "Carcharhinus melanopterus"
full_name2 <- paste(genus, species)
full_name2

# Check the type:
class(genus)  # "character"
```

**IMPORTANT:** Numbers in quotes are TEXT, not numbers!

```{r error=TRUE}

sample_id <- "42"
class(sample_id)  # "character" - we can't perform operations with the variable sample_id

sample_id + 1  # generates an error because we're trying to add an integer and a character
```

## 3. LOGICAL - TRUE or FALSE (Boolean values)

Used for yes/no questions and conditions.

```{r}

is_mammal <- FALSE
has_wings <- TRUE
is_extinct <- FALSE

class(is_mammal)  # "logical"
```

Logical values come from comparisons:

```{r}
5 > 3         # TRUE (5 is greater than 3)
5 < 3         # FALSE
5 == 5 # TRUE (note: double equals for comparison)
5 != 3        # TRUE (5 is NOT equal to 3)
10 >= 10      # TRUE (greater than OR equal)
10 <= 5       # FALSE
```

Logical operators:

```{r}
TRUE & TRUE   # AND: both must be true -> TRUE
TRUE & FALSE  # -> FALSE
TRUE | FALSE  # OR: at least one must be true -> TRUE
!TRUE         # NOT: flips the value -> FALSE

is_mammal <- TRUE
can_fly <- FALSE
is_mammal & can_fly
is_mammal | can_fly

```

## 4. SPECIAL VALUES

```{r}
# NA - "Not Available" (missing data - VERY common in biology!)
weight <- NA
is.na(weight)  # TRUE - check if something is NA

# NULL - empty (no value at all)
empty <- NULL
is.null(empty)  # TRUE

# NaN - "Not a Number" (undefined mathematical result)
0/0  # NaN

# Inf - Infinity
1/0   # Inf
-1/0  # -Inf
```

## Type Conversion

Sometimes you need to convert between types:

```{r}
# Text to number:
as.numeric("42")     # 42

# Number to text:
as.character(42)     # "42"

# To logical:
as.logical(1)        # TRUE (any non-zero is TRUE)
as.logical(0)        # FALSE

# Invalid conversions give NA:
as.numeric("hello")  # NA (with a warning)
```

### EXERCISE

1.  Create a variable for your favorite animal's scientific name (character)
2.  Create a variable for its average lifespan in years (numeric)
3.  Create a logical variable indicating whether it's extinct or extant
4.  Check the class of each variable
5.  Convert your numeric variable to a character

```{r}
# Your code here:


```

------------------------------------------------------------------------

# PART 4: Functions

A **function** is a command that performs a specific task - it often streamlines repetitive or complex tasks.

Anatomy of a function call: `function_name(argument1, argument2, ...)`

**Arguments** (or parameters) are the inputs you give to a function.

```{r}
# Example: the sqrt() function calculates square roots
sqrt(16)      # Returns 4
sqrt(2)       # Returns 1.414...

# Example: the round() function rounds numbers
round(3.14159)           # Returns 3 (default: 0 decimal places)
round(3.14159, digits=2) # Returns 3.14 (2 decimal places)
round(3.14159, 2)        # Same thing (positional argument)

# Example: the paste() function combines text
paste("Hello", "World")                    # "Hello World"
paste("Sample", 1, sep="_")                # "Sample_1"
paste("A", "B", "C", sep="-")              # "A-B-C"
```

## Getting Help

```{r eval=FALSE}
?sqrt              # Help page for sqrt function
help(round)        # Same as ?round
```

Google is your friend: "R how to calculate standard deviation"

## Useful Built-in Functions

```{r}
# Math functions:
abs(-5)            # Absolute value: 5
sqrt(16)           # Square root: 4
log(10)            # Natural log: 2.303
log10(100)         # Log base 10: 2
exp(1)             # e^1: 2.718
ceiling(3.2)       # Round up: 4
floor(3.9)         # Round down: 3

# Character functions:
nchar("Biology")           # Number of characters: 7
toupper("hello")           # "HELLO"
tolower("WORLD")           # "world"
substr("Accipiter", 1, 3)  # Extract characters: "Acc"
```

### EXERCISE

1.  Use `sqrt()` to calculate the square root of 144
2.  Use `round()` to round 17.389 to 1 decimal place
3.  Use `paste()` to combine your first and last name
4.  Use `nchar()` to count the letters in "Blacktip reef shark"

```{r}
# Your code here:

```

------------------------------------------------------------------------

# PART 5: Vectors

A **vector** is a sequence of values of the SAME type. It's the fundamental data structure in R.

## Creating Vectors

Use `c()` - which stands for "combine" or "concatenate".

```{r}
# Numeric vector (e.g., body masses of 5 birds in grams):
body_mass <- c(1200, 1350, 1150, 1425, 1275)
body_mass

# Character vector (e.g., species names):
species <- c("Goshawk", "Sparrowhawk", "Buzzard", "Kestrel")
species

# Logical vector:
is_raptor <- c(TRUE, TRUE, TRUE, TRUE)
is_raptor
```

## Shortcuts for Creating Sequences

```{r}
# The colon operator for integer sequences:
1:10              # 1, 2, 3, 4, 5, 6, 7, 8, 9, 10

# seq() for more control:
seq(from=0, to=100, by=10)      # 0, 10, 20, ..., 100
seq(from=0, to=1, length.out=5) # 5 evenly spaced values

# rep() to repeat values:
rep(0, times=5)                 # 0, 0, 0, 0, 0
rep(c("A", "B"), times=3)       # "A", "B", "A", "B", "A", "B"
rep(c("A", "B"), each=3)        # "A", "A", "A", "B", "B", "B"
```

## Vector Properties

```{r}
length(body_mass)     # How many elements? 5
class(body_mass)      # What type? "numeric"
summary(body_mass)    # Quick statistical summary

```

## Accessing Vector Elements (Indexing)

SUPER IMPORTANT!!

R uses 1-based indexing (first element is position 1). For Python users - Python uses 0-based, so the first element is position 0.

```{r}
body_mass[1]          # First element: 1200
body_mass[3]          # Third element: 1150
body_mass[c(1,3,5)]   # Elements 1, 3, and 5

# Negative indices EXCLUDE elements:
body_mass[-1]         # Everything except first element
body_mass[-c(1,2)]    # Everything except elements 1 and 2
body_mass[length(body_mass)] 

# Get a range:
body_mass[2:4]        # Elements 2 through 4
```

## Named Vectors

Give names to elements for easier access:

```{r}
wing_length <- c(goshawk=58, sparrowhawk=32, buzzard=52)
wing_length

wing_length["goshawk"]              # Access by name: 58
wing_length[c("goshawk", "buzzard")] # Multiple names
```

## Logical Indexing (Filtering)

Select elements based on conditions:

```{r}
body_mass                   # 1200, 1350, 1150, 1425, 1275
body_mass > 1300            # FALSE, TRUE, FALSE, TRUE, FALSE
body_mass[body_mass > 1300] # Only values > 1300: 1350, 1425

# Which birds are above average weight?
mean_mass <- mean(body_mass)
body_mass[body_mass > mean_mass]
```

## Vectorized Operations

Operations apply to ALL elements automatically:

```{r}
body_mass_kg <- body_mass / 1000     # Convert all to kg
body_mass_kg

# Element-wise operations between vectors:
length_cm <- c(55, 35, 50, 30, 45)
width_cm <- c(8, 5, 7, 4, 6)
area <- length_cm * width_cm         # Multiply corresponding elements
```

### EXERCISE

1.  Create a vector called `temps` with these daily temperatures: 18.5, 20.2, 19.8, 22.1, 21.5, 19.0, 17.8
2.  Calculate the mean temperature
3.  Find which days were above 20 degrees
4.  What was the temperature range (max - min)?

```{r}
# Your code here:


```

------------------------------------------------------------------------

# PART 6: Data Frames

A **data frame** is like a spreadsheet:

-   Rows are observations (e.g., individual birds)
-   Columns are variables (e.g., species, weight, wing_length)
-   Each column is a vector (so all values in a column are the same type)
-   Different columns can have different types

## Creating a Data Frame

```{r}
birds <- data.frame(
  species = c("Goshawk", "Sparrowhawk", "Buzzard", "Kestrel", "Peregrine"),
  body_mass_g = c(1200, 250, 900, 200, 750),
  wing_span_cm = c(115, 65, 120, 75, 100),
  is_migratory = c(FALSE, FALSE, TRUE, TRUE, TRUE)
)

# View the data frame:
birds
```

For large datasets, use:

```{r}
head(birds, 3)      # First 3 rows
tail(birds, 2)      # Last 2 rows
```

## Exploring Data Frame Structure

```{r}
nrow(birds)         # Number of rows: 5
ncol(birds)         # Number of columns: 4
dim(birds)          # Both: 5 4

names(birds)        # Column names
colnames(birds)     # Same as names()

str(birds)          # Structure - shows types of each column
summary(birds)      # Statistical summary of each column
```

## Accessing Columns

```{r}
# Method 1: $ notation (most common)
birds$species           # Returns species column as a vector
birds$body_mass_g      # Returns body_mass_g column

# Method 2: Double brackets
birds[["species"]]      # Same result

# Method 3: Single brackets (returns data frame)
birds[, "species"]      # All rows, species column
birds[, c("species", "body_mass_g")]  # Multiple columns
```

## Accessing Rows

```{r}
birds[1, ]              # First row (all columns)
birds[c(1, 3), ]        # Rows 1 and 3
birds[1:3, ]            # Rows 1 through 3
```

## Accessing Specific Cells

```{r}
birds[1, "species"]              # Row 1, species column: "Goshawk"
birds[2, 2]                      # Row 2, column 2: 250
```

## Filtering Rows with Conditions

```{r}
# Birds heavier than 500g:
birds[birds$body_mass_g > 500, ]

# Migratory birds only:
birds[birds$is_migratory == TRUE, ]
# Or equivalently:
birds[birds$is_migratory, ]

# Multiple conditions (use & for AND, | for OR):
birds[birds$body_mass_g > 500 & birds$is_migratory == TRUE, ]
```

## Adding New Columns

```{r}
# Calculate body mass in kg:
birds$body_mass_kg <- birds$body_mass_g / 1000
birds

# Add a categorical column:
birds$size_category <- ifelse(birds$body_mass_g > 500, "Large", "Small") #ifelse(test, yes, no)
birds
```

## Modifying Data

```{r}
# Change a single value:
birds[1, "body_mass_g"] <- 1250
birds

# Update based on condition:
birds$body_mass_g[birds$species == "Goshawk"] <- 1300
```

## Sorting Data Frames

```{r}
# Sort by body mass (ascending):
birds[order(birds$body_mass_g), ]

# Sort by body mass (descending):
birds[order(birds$body_mass_g, decreasing = TRUE), ]
# Or use negative for numeric columns:
birds[order(-birds$body_mass_g), ]
```

### EXERCISE

1.  Create a data frame called `trees` with columns:
    -   species: "Oak", "Maple", "Pine", "Birch"
    -   height_m: 25, 20, 30, 18
    -   is_evergreen: FALSE, FALSE, TRUE, FALSE
2.  Add a new column `height_ft` (height in feet = height_m \* 3.28)
3.  Filter to show only trees taller than 20 meters
4.  What is the average height of all trees in meters?

```{r}
# Your code here:



```

------------------------------------------------------------------------

# PART 7: Handling Missing Data (NA Values)

Real-world biological data almost ALWAYS has missing values, in R, missing values are represented as NA.

```{r}
# Create data with missing values:
measurements <- data.frame(
  sample_id = 1:6,
  weight = c(45.2, 52.1, NA, 48.7, 51.3, NA),
  length = c(12.5, NA, 14.2, 13.8, NA, 15.1),
  status = c("alive", "alive", "dead", NA, "alive", "dead")
)
measurements
```

## Detecting Missing Values

```{r}
is.na(measurements$weight)           # TRUE/FALSE for each element
sum(is.na(measurements$weight))      # Count NAs in weight: 2
sum(is.na(measurements))             # Total NAs in whole data frame

# Which rows have complete data?
complete.cases(measurements)          # TRUE/FALSE for each row
```

## NA in Calculations

```{r}
mean(measurements$weight)             

# Solution: use na.rm = TRUE (remove NAs)
mean(measurements$weight, na.rm = TRUE)   

# This works for most statistical functions:
sum(measurements$weight, na.rm = TRUE)
sd(measurements$length, na.rm = TRUE)
max(measurements$weight, na.rm = TRUE)
```

## Removing Rows with Missing Values

```{r}
# Remove rows with ANY missing values:
measurements_complete <- na.omit(measurements)
measurements_complete   

# Remove rows with NA in a specific column:
measurements[!is.na(measurements$weight), ]
```

## Replacing Missing Values 

```{r}
# Replace NAs with a specific value:
measurements$weight[is.na(measurements$weight)] <- 0

# Replace with mean:
# First, let's reset the data
measurements$weight <- c(45.2, 52.1, NA, 48.7, 51.3, NA)

# Replace NAs with the mean weight
mean_weight <- mean(measurements$weight, na.rm = TRUE)
measurements$weight[is.na(measurements$weight)] <- mean_weight
measurements
```

### EXERCISE

1.  How many missing values are in the length column of measurements?
2.  What is the median length (excluding NAs)?
3.  Remove all rows with any missing values from measurements

```{r}
# Your code here:



```

------------------------------------------------------------------------

# PART 8: Packages - Extending R's Capabilities

R comes with many built-in functions, **packages** add many many more. Packages are collections of functions that other people have written made avialable to us.

## Installing Packages

You only need to install a package ONCE on your computer. Do this in the Console, not in your script:

```{r eval=FALSE}
install.packages("ggplot2")  # For advanced plotting
install.packages("dplyr")    # For data manipulation
```

## Loading Packages

You need to load a package EACH TIME you start R. Put `library()` calls at the top of your script:

```{r}
library(ggplot2)
library(dplyr)
```

## Checking Installed Packages

```{r eval=FALSE}
installed.packages()   # Shows all installed packages
```

# PART 9: Importing and Exporting Data

In real research, you'll read data from files, not type it in!

## Setting Your Working Directory

```{r}
# First, check where R is looking for files:
getwd()
```

```{r eval=FALSE}
# Change the working directory:
setwd("/path/to/your/folder")
# Or use: Session → Set Working Directory → Choose Directory in RStudio
```

## Reading CSV Files

CSV (Comma-Separated Values) is the most common format.

```{r eval=FALSE}
# Basic syntax:
my_data <- read.csv("filename.csv")

# With options:
my_data <- read.csv("filename.csv",
                    header = TRUE,              # First row is column names
                    stringsAsFactors = FALSE,   # Keep text as text
                    na.strings = c("", "NA", "N/A"))  # What counts as NA
```

Let's create a sample file to practice:

```{r}
sample_data <- data.frame(
  species = c("Goshawk", "Sparrowhawk", "Buzzard"),
  count = c(15, 42, 28),
  location = c("Forest", "Garden", "Field")
)

# Write to CSV:
write.csv(sample_data, "bird_counts.csv", row.names = FALSE)

# Read it back:
bird_data <- read.csv("bird_counts.csv")
bird_data
```

## Always Check Your Data After Importing

```{r}
head(bird_data)          # First few rows
str(bird_data)           # Structure
summary(bird_data)       # Summary statistics
dim(bird_data)           # Dimensions
```

## Now let's head to the assignment!
